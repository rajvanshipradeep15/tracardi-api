# Tracking

Tracking refers to the method of consistently maintaining a single Profile ID for all
customer interactions on a particular device. This Profile ID is crucial for identifying and linking various activities
and behaviors of a customer to a unified profile. The device or client is responsible for ensuring that the Profile ID
remains unchanged throughout all interactions, thereby providing a continuous and accurate record of customer behavior
on that device. Tracking is connected with the device, while [Identification](identification.md) is a process on a server.

## Tracking IDs (Client Side)

Tracardi use 2 different IDs for maintaining customer identity: the Profile ID and the Session ID. These IDs help in
tracking customer interactions and maintaining single customer profile across multiple sessions and devices.

### Profile ID

- **Creation**:
    - The Profile ID is generated by Tracardi when a customer first interacts with the website or application. This ID
      is unique to the customer and remains consistent across all future interactions within the same browser or device.
    - It is stored in the local storage of the browser to ensure persistence across multiple visits. Browser or device
      should make sure that once profile ID is send from Tracardi it will maintain the same on one device.

- **Purpose**:
    - The Profile ID is used to create and maintain a customer profile that aggregates all customer interactions,
      preferences, and attributes over time.
    - It enables Tracardi to identify and later merge multiple profiles from different devices, ensuring a unified view
      of the customer.

### Session ID

- **Creation**:
    - The Session ID is generated on the client side (e.g., web browser) when a customer opens a browser or mobile app.
      Each new session (e.g., each new visit or app launch) results in a new Session ID.
    - It is stored in a cookie in the customer's browser and remains the same for the duration of the session. A new
      Session ID is created if the browser or app is closed and reopened. This applies to any device capable of storing
      the ID, including mobile apps.

- **Purpose**:
    - The Session ID is used to track a customer's activities within a single session. It helps in understanding the
      sequence of customer actions and behaviors during a specific visit.
    - It ensures that interactions are grouped into distinct sessions, providing insights into session-based metrics
      like duration, page views, and conversion rates.
    - If the device cannot store the Session ID, a new session will be created for every event. However, it is possible
      to embed static session with each event so that all events belong to the same session.

### How They Work Together

- **Profile ID**:
    - When a customer visits the website for the first time, Tracardi generates a Profile ID and stores it in the local
      device storage.
    - The Profile ID should be saved on the device and remain constant across multiple visits and sessions, allowing
      Tracardi to build a comprehensive profile based on long-term interactions.

- **Session ID**:
    - Each time the customer starts a new session (opens the browser or app), a new Session ID is generated and stored
      in a cookie.
    - Session should also be saved on the device. All events and interactions within this session are tagged with the
      Session ID, enabling Tracardi to group them accordingly.
    - A session can be used to retrieve a lost Profile ID. If an existing session is sent, the system will return the
      corresponding profile that originated this session, and the event will reference this profile along with the sent
      session. This is a very powerful way of maintaining consistency in the use-cases where the profile ID can not be
      sent.

- **[Identification](identification.md) and [Identity Resolution](identity_resolution.md)**:
    - Tracardi uses the Profile ID or Session ID to load profile before consuming the event. When the event is sent,
      Tracardi first must identify the profile and load it.
    - Correct identification ensures that all customer data is consolidated under a single profile.
    - Identity resolution is a process that combines Tracing, Identification and Merging.

#### Example

- **First Visit**:
    - User visits the website, and Tracardi generates a Profile ID (`profile-id-123`) and a Session
      ID (`session-id-abc123`).
    - The Profile ID is stored in local storage, and the Session ID is stored in a cookie.

- **Subsequent Visits**:
    - On the next visit, the browser retrieves the existing Profile ID (`profile-id-123`) from local storage.
    - A new Session ID (`session-id-def456`) is generated and stored in a cookie for this new session.
    - Tracardi associates the new session's data with the existing Profile ID, enriching the customer's profile with new
      interactions.

